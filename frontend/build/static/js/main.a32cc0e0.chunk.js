(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{56:function(e){e.exports=JSON.parse('{"a":{"dev":"ws://localhost:8000/","prod":"wss://chatbasico06.herokuapp.com/"}}')},70:function(e,t,n){e.exports=n(80)},80:function(e,t,n){"use strict";n.r(t);var a,r,o,c=n(0),l=n.n(c),u=n(8),i=n.n(u),s=n(15),m=n(35),f=n(11),E=n(44),v=n(18),d=function(e){return console.log("mensajes => ",e),function(t){t({type:"MENSAJES_ADD",value:e})}},b=function(e){return function(t){t({type:"USER_ADD",value:e})}},p=n(56).a.dev,h=n(111),g=n(109),j=n(113),O=n(114),S=n(115),y=n(122),w=n(110),k=n(112),x=n(116),D=function(e){var t=e.event,n=void 0===t?function(e){return e}:t,a=Object(c.useState)(""),r=Object(v.a)(a,2),o=r[0],u=r[1],i=function(e){e.preventDefault(),n(o),u("")};return l.a.createElement("form",{onSubmit:i},l.a.createElement(y.a,{value:o,onChange:function(e){return u(e.target.value)},label:"Nueva sala",size:"small",variant:"outlined"}),l.a.createElement(w.a,{onClick:i,disabled:!o},"crear"))},N=function(){var e=Object(s.c)((function(e){return e})),t=e.mensajes,n=void 0===t?[]:t,o=e.usuario,u=void 0===o?null:o,i=Object(s.b)(),m=Object(c.useState)(""),N=Object(v.a)(m,2),J=N[0],A=N[1],C=Object(c.useState)([]),_=Object(v.a)(C,2),W=_[0],I=_[1],M=Object(f.g)();Object(c.useEffect)((function(){return R()}),[]);var R=function(){return z(),U(),function(){a.close(),r.close()}},z=function(){var e,t;e="home",t=u,(a=new WebSocket("".concat(p,"/ws/chat/").concat(e,"/").concat(t,"/"))).onopen=function(){console.log("conectado...")},a.onmessage=function(e){var t=JSON.parse(e.data);console.log(n,t),i(d(Object(E.a)(t.mensajes))),A("")},a.onclose=function(){return console.log("cerrar conexion...")},a.onerror=function(e){return console.log("error...",e)}},U=function(){(r=new WebSocket("".concat(p,"/ws/salas/"))).onopen=function(){console.log("conectado...")},r.onmessage=function(e){var t=JSON.parse(e.data);console.log(t),I(t.salas)},r.onclose=function(){return console.log("cerrar conexion...")},r.onerror=function(e){return console.log("error...",e)}};return l.a.createElement("div",null,l.a.createElement(h.a,{onClick:function(){i(b(null))}},l.a.createElement(k.a,null)),l.a.createElement("div",null,l.a.createElement("b",null,"Salas"),l.a.createElement("hr",null),l.a.createElement(D,{event:function(e){r.send(JSON.stringify({sala:e,usuario:u}))}}),l.a.createElement(g.a,null,W.map((function(e){return l.a.createElement(j.a,{key:e.pk,button:!0,onClick:function(){return M.push("/sala/".concat(e.pk))}},l.a.createElement(O.a,{primary:e.nombre,secondary:"".concat(e.creador," - ").concat(e.fecha)}),l.a.createElement(S.a,null,l.a.createElement(x.a,null)))})))),l.a.createElement("h3",null,"Home"),l.a.createElement("h4",null,u),l.a.createElement("form",{onSubmit:function(e){a.send(JSON.stringify({message:J,user:u})),e.preventDefault()}},l.a.createElement(y.a,{value:J,onChange:function(e){return A(e.target.value)},variant:"outlined",size:"small",focused:!0}),l.a.createElement(w.a,{type:"submit",variant:"text",disabled:!J,color:"secondary",endIcon:l.a.createElement(x.a,null)},"enviar")),l.a.createElement("hr",null),n.map((function(e,t){return l.a.createElement("section",{key:e.usuario+"_"+t},l.a.createElement("b",null,e.usuario),l.a.createElement("p",null,e.message))})))},J=n(117),A=Object(J.a)((function(e){return{container:{display:"flex",justifyContent:"center"},form:{width:300,height:350}}})),C=function(){var e=Object(c.useState)(""),t=Object(v.a)(e,2),n=t[0],a=t[1],r=Object(s.b)(),o=A(),u=function(e){r(b(n)),a(""),e.preventDefault()};return l.a.createElement("div",{className:o.container},l.a.createElement("div",{className:o.form},l.a.createElement("h4",null,"registro"),l.a.createElement("form",{onSubmit:u},l.a.createElement(y.a,{label:"Nombre ",value:n,onChange:function(e){return a(e.target.value)},variant:"outlined",fullWidth:!0}),l.a.createElement(w.a,{fullWidth:!0,disabled:""===n,color:"primary",variant:"contained",onClick:u},"agregar"))))},_=n(120),W=n(121),I=n(118),M=n(119),R=function(){var e=Object(s.c)((function(e){return e})),t=e.mensajes,n=void 0===t?[]:t,a=e.usuario,r=void 0===a?null:a,u=Object(s.b)(),i=Object(f.h)().id,b=Object(c.useState)(""),h=Object(v.a)(b,2),k=h[0],D=h[1],N=Object(c.useState)({}),J=Object(v.a)(N,2),A=J[0],C=J[1];Object(c.useEffect)((function(){return R()}),[]);var R=function(){return console.log("sala ",i),z(),function(){o.close(),u(d([]))}},z=function(){(o=function(e){return new WebSocket("".concat(p,"/ws/sala/").concat(e,"/"))}(i)).onopen=function(){console.log("conectado...")},o.onmessage=function(e){var t=JSON.parse(e.data),n=t.sala,a=t.mensajes;console.log(a,n,a),C(n),u(d(Object(E.a)(a)))},o.onclose=function(){return console.log("cerrar conexion...")},o.onerror=function(e){return console.log("error...",e)}};return l.a.createElement("div",{style:{height:"90%",width:"calc(100% - 40px)",position:"absolute"}},l.a.createElement(m.b,{to:"/"},l.a.createElement(w.a,{variant:"text",color:"primary",startIcon:l.a.createElement(I.a,null)},"salir ",r)),l.a.createElement("h3",null,"sala : ",A.nombre),l.a.createElement("b",null,"Creada: ",A.fecha+" por :"+A.creador),l.a.createElement("hr",null),l.a.createElement(g.a,{style:{height:"calc(100% - 200px)",width:"calc(100% - 5px)",marginTop:20,overflow:"auto"}},n.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(j.a,{key:e.pk},l.a.createElement(O.a,{primary:e.text,secondary:"".concat(e.usuario," - ").concat(e.date," ")})),l.a.createElement(S.a,null,r===e.usuario&&l.a.createElement(M.a,null)),l.a.createElement(_.a,null))}))),l.a.createElement("hr",null),l.a.createElement("form",{onSubmit:function(e){o.send(JSON.stringify({sala:i,usuario:r,mensaje:k})),console.log("enviar",k),D(""),e.preventDefault()}},l.a.createElement("br",null),l.a.createElement(y.a,{fullWidth:!0,color:"primary",InputProps:{startAdornment:l.a.createElement(W.a,{position:"start"},l.a.createElement(x.a,{color:"primary"}))},label:"nuevo mensaje",size:"small",variant:"outlined",value:k,onChange:function(e){return D(e.target.value)}})))},z=function(){var e=Object(s.c)((function(e){return e})).usuario,t=void 0===e?null:e;Object(c.useEffect)((function(){return n()}));var n=function(){console.log("rutas",t)};return l.a.createElement(m.a,null,null!==t?l.a.createElement(f.d,null,l.a.createElement(f.b,{path:"/",component:N,exact:!0}),l.a.createElement(f.b,{path:"/sala/:id",component:R,exact:!0}),l.a.createElement(f.b,{path:"",component:function(){return l.a.createElement(f.a,{to:"/"})}})):l.a.createElement(f.d,null,l.a.createElement(f.b,{path:"/registro",component:C,exact:!0}),l.a.createElement(f.b,{path:"",component:function(){return l.a.createElement(f.a,{to:"/registro"})}})))};var U=function(){return l.a.createElement(z,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=n(31),F=n(60),H=[],L=[],P=Object(B.c)({mensajes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MENSAJES_ADD":return t.value;default:return e}},salas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SALAS_ADD":return t.value;default:return e}},usuario:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ADD":return localStorage.setItem("chat_user",t.value),t.value;case"USER_REMOVE":return localStorage.removeItem("chat_user"),t.value;default:var n=localStorage.getItem("chat_user");console.log(n);var a="null"!==n?n:null;return e||a}}}),T=Object(B.d)(P,{mensajes:H,salas:L,usuario:null},Object(B.a)(F.a));i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(s.a,{store:T},l.a.createElement(U,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[70,1,2]]]);
//# sourceMappingURL=main.a32cc0e0.chunk.js.map