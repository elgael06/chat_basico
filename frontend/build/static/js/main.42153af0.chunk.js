(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{63:function(e){e.exports=JSON.parse('{"a":{"dev":"://localhost:8000","prod":"://chatbasico06.herokuapp.com"}}')},81:function(e,t,a){e.exports=a(91)},91:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(9),c=a.n(r),l=a(15),i=a(119),u=a(147),s=a(144),m=a(46),f=a(11),p=a(25),d=function(e){return console.log("mensajes => ",e),function(t){t({type:"MENSAJES_ADD",value:e})}},g=function(e){return function(t){t({type:"USER_ADD",value:e})}},E=function(){return function(e){return setTimeout((function(){return e({type:"UI_LOADING_OFF"})}),500)}},b=a(63),v="https:"===window.location.protocol?"wss":"ws";console.log("entorno front ","production");var h="".concat(v).concat(b.a.prod);console.log("ip ",h);var O,j,w=a(127),S=a(128),x=a(129),N=a(44),y=a(125),k=a(132),I=a(133),D=a(134),_=a(130),A=a(131),C=a(135),G=a(145),W=a(126),J=Object(i.a)((function(e){return{form:{display:"flex"},input:{flexGrow:1,alignSelf:"strech"}}})),B=function(e){var t=e.event,a=void 0===t?function(e){return e}:t,r=Object(n.useState)(""),c=Object(p.a)(r,2),l=c[0],i=c[1],u=function(e){e.preventDefault(),a(l),i("")},s=J();return o.a.createElement("form",{onSubmit:u,className:s.form},o.a.createElement(G.a,{className:s.input,value:l,onChange:function(e){return i(e.target.value)},label:"Nueva sala",size:"small",variant:"outlined"}),o.a.createElement(W.a,{onClick:u,disabled:!l,variant:"text",color:"secondary"},"crear"))},U=Object(i.a)((function(e){return{root:{flexGrow:1,top:0,bottom:0,left:0,right:0,position:"absolute"},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:78,alignItems:"flex-start",paddingTop:e.spacing(1),paddingBottom:e.spacing(2)},title:{flexGrow:1,alignSelf:"flex-end"},lista:{border:" 1px solid #eee",height:"calc(100% - 250px)",marginTop:15,overflow:"auto"}}})),L=function(){var e=Object(l.c)((function(e){return e})).usuario,t=void 0===e?null:e,a=Object(l.b)(),r=Object(n.useState)([]),c=Object(p.a)(r,2),i=c[0],u=c[1],s=Object(f.g)(),m=U();Object(n.useEffect)((function(){return d()}),[]);var d=function(){return a((function(e){return e({type:"UI_LOADING_ON"})})),b(),function(){O.close()}},b=function(){(O=new WebSocket("".concat(h,"/ws/salas/"))).onopen=function(){console.log("conectado...")},O.onmessage=function(e){var t=JSON.parse(e.data);console.log(t),u(t.salas),a(E())},O.onclose=function(){return console.log("cerrar conexion...")},O.onerror=function(e){return console.log("error...",e)}};return o.a.createElement("div",{className:m.root},o.a.createElement(w.a,{position:"sticky",color:"primary"},o.a.createElement(S.a,{className:m.toolbar},o.a.createElement(x.a,{edge:"start","aria-label":"open drawer",color:"inherit",onClick:function(){return s.push("/")}},o.a.createElement(_.a,{color:"inherit"})),o.a.createElement("div",{className:m.title},o.a.createElement(N.a,{component:"b",variant:"h5",noWrap:!0},"Bienvenido. "),o.a.createElement(N.a,{component:"h5",variant:"b",noWrap:!0},"App Chat. "),o.a.createElement(N.a,{component:"u",variant:"u",noWrap:!0}," hola : ",t)),o.a.createElement(x.a,{onClick:function(){a(g(null))},color:"inherit",edge:"end"},o.a.createElement(A.a,null)))),o.a.createElement("br",null),o.a.createElement("b",null,"Salas"),o.a.createElement("hr",null),o.a.createElement(B,{event:function(e){O.send(JSON.stringify({sala:e,usuario:t}))}}),o.a.createElement(y.a,{className:m.lista},i.map((function(e){return o.a.createElement(k.a,{key:e.pk,button:!0,onClick:function(){return s.push("/sala/".concat(e.pk))}},o.a.createElement(I.a,{primary:e.nombre,secondary:"".concat(e.creador," - ").concat(e.fecha)}),o.a.createElement(D.a,null,o.a.createElement(C.a,null)))}))))},T=a(146),F=Object(i.a)((function(e){return{root:{flexGrow:1,top:0,bottom:0,left:0,right:0,position:"absolute",justifyContent:"center",alignContent:"center",alignItems:"center",flexDirection:"column"},toolbar:{minHeight:78,alignItems:"flex-start",paddingTop:e.spacing(1),paddingBottom:e.spacing(2)},title:{flexGrow:1,alignSelf:"center"},form:{flexGrow:1,padding:10,maxWidth:380},input:{flexGrow:1,alignSelf:"strech"},boton:{marginLeft:5}}})),R=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],r=t[1],c=Object(l.b)(),i=F();Object(n.useEffect)((function(){return u()}),[]);var u=function(){c(E())},s=function(e){c(g(a)),r(""),e.preventDefault()};return o.a.createElement("div",{className:i.root},o.a.createElement(w.a,{className:i.toolbar,position:"sticky",color:"primary"},o.a.createElement(T.a,null,o.a.createElement(N.a,{className:i.title,variant:"h5"},"App chat"))),o.a.createElement("div",{className:i.form},o.a.createElement("h4",null,"registro"),o.a.createElement("form",{onSubmit:s},o.a.createElement(G.a,{className:i.input,label:"Nombre ",value:a,onChange:function(e){return r(e.target.value)},variant:"outlined",size:"small"}),o.a.createElement(W.a,{className:i.boton,disabled:""===a,color:"primary",variant:"contained",onClick:s},"agregar"))))},z=a(69),H=a(137),M=a(141),q=a(142),P=a(136),V=a(138),$=a(139),K=a(140),Q=a(143),X=Object(i.a)((function(e){return{root:{flexGrow:1,top:0,bottom:0,left:0,right:0,position:"absolute"},menuButton:{marginRight:e.spacing(2)},toolbar:{minHeight:78,alignItems:"flex-start",paddingTop:e.spacing(1),paddingBottom:e.spacing(2)},title:{flexGrow:1,alignSelf:"flex-end"},lista:{height:"calc(100% - 220px)",width:"calc(100% - 5px)",marginTop:15,overflow:"auto"},form:{padding:5,flexGrow:1,alignSelf:"flex-end",width:"calc( 100% - 10px )"}}})),Y=function(){var e=Object(l.c)((function(e){return e})),t=e.mensajes,a=void 0===t?[]:t,r=e.usuario,c=void 0===r?null:r,i=Object(l.b)(),u=Object(f.h)().id,s=Object(n.useState)(""),m=Object(p.a)(s,2),g=m[0],b=m[1],v=Object(n.useState)({}),O=Object(p.a)(v,2),_=O[0],A=O[1],W=Object(f.g)(),J=X();Object(n.useEffect)((function(){return B()}),[]);var B=function(){return console.log("sala ",u),i((function(e){return e({type:"UI_LOADING_ON"})})),U(),function(){j.close(),i(d([]))}},U=function(){(j=function(e){return new WebSocket("".concat(h,"/ws/sala/").concat(e,"/"))}(u)).onopen=function(){console.log("conectado...")},j.onmessage=function(e){var t=JSON.parse(e.data),a=t.sala,n=t.mensajes;console.log(n,a,n),A(a),i(d(Object(z.a)(n)));var o=document.querySelector(".msg-container");o.scrollTop=o.scrollHeight,i(E())},j.onclose=function(){return console.log("cerrar conexion...")},j.onerror=function(e){return console.log("error...",e)}},L=function(e){""!==g&&(j.send(JSON.stringify({sala:u,usuario:c,mensaje:g})),console.log("enviar",g),b("")),e.preventDefault()};return o.a.createElement("div",{className:J.root},o.a.createElement(w.a,{position:"sticky",color:"primary"},o.a.createElement(S.a,{className:J.toolbar},o.a.createElement(x.a,{edge:"start","aria-label":"open drawer",color:"inherit",onClick:function(){return W.push("/")}},o.a.createElement(P.a,{color:"inherit"})),o.a.createElement("div",{className:J.title},o.a.createElement(N.a,{component:"b",variant:"h5",noWrap:!0},"Sala : ",_.nombre),o.a.createElement(N.a,{component:"h5",variant:"b",noWrap:!0},"Creada: ",_.fecha),o.a.createElement(N.a,{component:"u",variant:"u",noWrap:!0}," por : ",_.creador)),o.a.createElement(x.a,{edge:"end"},o.a.createElement(H.a,{badgeContent:"2",color:"secondary"},o.a.createElement(V.a,null))))),o.a.createElement(y.a,{className:"msg-container "+J.lista},a.map((function(e){return o.a.createElement(n.Fragment,{key:e.pk},o.a.createElement(k.a,{style:{background:c===e.usuario?"#eeeeee":"white"}},o.a.createElement(I.a,{primary:e.text,secondary:"".concat(e.usuario," - ").concat(e.date," ")}),o.a.createElement(D.a,null,c===e.usuario?o.a.createElement($.a,null):o.a.createElement(K.a,null))),o.a.createElement(M.a,null))}))),o.a.createElement("form",{onSubmit:L},o.a.createElement("br",null),o.a.createElement(G.a,{color:"primary",InputProps:{startAdornment:o.a.createElement(q.a,{position:"start"},o.a.createElement(Q.a,{htmlColor:"#00000080"})),endAdornment:o.a.createElement(q.a,{position:"end"},o.a.createElement(x.a,{disabled:""===g,onClick:L},o.a.createElement(C.a,{color:"primary"})))},className:J.form,placeholder:"mensaje..",variant:"outlined",value:g,onChange:function(e){return b(e.target.value)}})))},Z=function(){var e=Object(l.c)((function(e){return e})).usuario,t=void 0===e?null:e;Object(n.useEffect)((function(){return a()}));var a=function(){console.log("rutas",t)};return o.a.createElement(m.a,null,null!==t?o.a.createElement(f.d,null,o.a.createElement(f.b,{path:"/",component:L,exact:!0}),o.a.createElement(f.b,{path:"/sala/:id",component:Y,exact:!0}),o.a.createElement(f.b,{path:"",component:function(){return o.a.createElement(f.a,{to:"/"})}})):o.a.createElement(f.d,null,o.a.createElement(f.b,{path:"/registro",component:R,exact:!0}),o.a.createElement(f.b,{path:"",component:function(){return o.a.createElement(f.a,{to:"/registro"})}})))},ee=Object(i.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));var te=function(){var e=Object(l.c)((function(e){return e})).ui,t=ee();return o.a.createElement(n.Fragment,null,o.a.createElement(Z,null),o.a.createElement(u.a,{className:t.backdrop,open:e.loading},o.a.createElement(s.a,{color:"inherit"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=a(34),ne=a(68),oe=[],re=[],ce=a(43),le={loading:!0},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UI_LOADING_ON":return Object(ce.a)(Object(ce.a)({},e),{},{loading:!0});case"UI_LOADING_OFF":return Object(ce.a)(Object(ce.a)({},e),{},{loading:!1});default:return e}},ue=Object(ae.c)({mensajes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MENSAJES_ADD":return t.value;default:return e}},salas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SALAS_ADD":return t.value;default:return e}},usuario:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_ADD":return localStorage.setItem("chat_user",t.value),t.value;case"USER_REMOVE":return localStorage.removeItem("chat_user"),t.value;default:var a=localStorage.getItem("chat_user");console.log(a);var n="null"!==a?a:null;return e||n}},ui:ie}),se=Object(ae.d)(ue,{mensajes:oe,salas:re,usuario:null,ui:le},Object(ae.a)(ne.a));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(l.a,{store:se},o.a.createElement(te,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[81,1,2]]]);
//# sourceMappingURL=main.42153af0.chunk.js.map